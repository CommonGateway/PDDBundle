{
  "title": "XxllncCaseToWoo",
  "$id": "https://commongateway.nl/mapping/woo.xxllncCaseToWoo.mapping.json",
  "$schema": "https://docs.commongateway.nl/schemas/Mapping.schema.json",
  "version": "0.0.19",
  "passTrough": false,
  "mapping": {
    "_sourceId": "id",
    "id": "object_id",
    "behandelendBestuursorgaan.oidn": "{% if behandelendBestuursorgaan.oidn|default %}{{ behandelendBestuursorgaan.oidn }}{% else %}unknown{% endif %}",
    "behandelendBestuursorgaan.naam": "behandelendBestuursorgaan.naam",
    "titel": "{% if values['case&#46;subject_external']|default %}{{ values['case&#46;subject_external'] }}{% endif %}",
    "beschrijving": "{% if values['attribute&#46;woo_beschrijving']|default %}{{ values['attribute&#46;woo_beschrijving'] }}{% endif %}",
    "samenvatting": "{% if values['attribute&#46;woo_samenvatting']|default %}{{ values['attribute&#46;woo_samenvatting'] }}{% endif %}",
    "categorie": "values.attribute&#46;woo_categorie",
    "ontvangstdatum": "{% if values['case&#46;date_of_registration']|default %}{{ values['case&#46;date_of_registration'] }}{% endif %}",
    "metadata.besluitdatum": "{% if values['attribute&#46;woo_datum_besluit']|default %}{{ values['attribute&#46;woo_datum_besluit'] }}{% elseif values['attribute&#46;ztc_datum_besluit']|default %}{{ values['attribute&#46;ztc_datum_besluit'] }}{% endif %}",
    "publicatiedatum": "{% if values['attribute&#46;woo_publicatiedatum']|default %}{{ values['attribute&#46;woo_publicatiedatum'] }}{% endif %}",
    "behandelstatus": "{% if values['case&#46;status']|default %}{% if values['case&#46;status'] == 'resolved' %}Afgehandeld{% elseif values['case&#46;status'] == 'open'  %}In behandeling{% elseif values['case&#46;status'] == 'closed'  %}Opgeschort{% elseif values['case&#46;status'] == 'new'  %}Nieuw{% endif %}{% endif %}",
    "termijnoverschrijding": "{% if values['case&#46;date_target']|default and values['case&#46;date_of_completion']|default %}{% set dateTarget = date(values['case&#46;date_target']) %}{% set dateOfCompletion = date(values['case&#46;date_of_completion']) %}{% set interval = dateTarget.diff(dateOfCompletion) %}{{ interval.days }}{% endif %}",
    "informatieverzoek": "{% if values['attribute&#46;woo_informatieverzoek'][0]|default %}{{ map('https://commongateway.nl/mapping/woo.xxllncDocumentSetSourceId.schema.json', values['attribute&#46;woo_informatieverzoek'][0])|json_encode }}{% endif %}",
    "inventarisatielijst": "{% if values['attribute&#46;woo_inventarisatielijst'][0]|default %}{{ map('https://commongateway.nl/mapping/woo.xxllncDocumentSetSourceId.schema.json', values['attribute&#46;woo_inventarisatielijst'][0])|json_encode }}{% endif %}",
    "besluit": "{% if values['attribute&#46;woo_besluit'][0]|default %}{{ map('https://commongateway.nl/mapping/woo.xxllncDocumentSetSourceId.schema.json', values['attribute&#46;woo_besluit'][0])|json_encode }}{% endif %}",
    "bijlagen": "[{% set index=0 %}{% if values['attribute&#46;woo_publicatie']|default %}{% for document in values['attribute&#46;woo_publicatie'] %}{% if index != 0 %},{% endif %}{{ map('https://commongateway.nl/mapping/woo.xxllncDocumentSetSourceId.schema.json', document)|json_encode }}{% set index=index+1 %}{% endfor %}{% endif %}]",
    "themas.0.hoofdthema": "{% if values['attribute&#46;woo_thema']|default %}{{ values['attribute&#46;woo_thema'] }}{% endif %}"
  },
  "cast": {
    "id": "string",
    "themas.0.hoofdthema": "unsetIfValue==",
    "themas.0": "unsetIfValue==",
    "informatieverzoek": "jsonToArray",
    "inventarisatielijst": "jsonToArray",
    "besluit": "jsonToArray",
    "bijlagen": "jsonToArray",
    "portalUrl": "unsetIfValue==",
    "titel": "unsetIfValue==",
    "beschrijving": "unsetIfValue==",
    "samenvatting": "unsetIfValue==",
    "termijnoverschrijding": "unsetIfValue==",
    "ontvangstdatum": "unsetIfValue==",
    "metadata.besluitdatum": "unsetIfValue==",
    "categorie": "unsetIfValue==values.attribute&#46;woo_categorie",
    "publicatiedatum": "unsetIfValue==",
    "behandelstatus": "unsetIfValue=="
  }
}
