{
  "title": "XxllncCaseToWoo",
  "$id": "https://commongateway.nl/mapping/pdd.xxllncCaseToWoo.schema.json",
  "$schema": "https://docs.commongateway.nl/schemas/Mapping.schema.json",
  "version": "0.0.12",
  "passTrough": false,
  "mapping": {
    "_sourceId": "id",
    "oidn": "{% if oidn|default %}{{ oidn }}{% else %}unknown{% endif %}",
    "UUID": "id",
    "ID": "id",
    "Object_ID": "object_id",
    "Portal_url": "",
    "Behandelend_bestuursorgaan": "bestuursorgaan",
    "Ontvanger_informatieverzoek": "",
    "Volgnummer": "",
    "Titel": "{% if values['case&#46;subject_external']|default %}{{ values['case&#46;subject_external'] }}{% endif %}",
    "Beschrijving": "{% if values['attribute&#46;woo_beschrijving']|default %}{{ values['attribute&#46;woo_beschrijving'] }}{% endif %}",
    "Samenvatting": "{% if values['attribute&#46;woo_samenvatting']|default %}{{ values['attribute&#46;woo_samenvatting'] }}{% endif %}",
    "Categorie": "values.attribute&#46;woo_categorie",
    "Verzoeker": "",
    "Ontvangstdatum": "{% if values['case&#46;date_of_registration']|default %}{{ values['case&#46;date_of_registration'] }}{% endif %}",
    "Besluitdatum": "{% if values['attribute&#46;woo_datum_besluit']|default %}{{ values['attribute&#46;woo_datum_besluit'] }}{% endif %}",
    "Publicatiedatum": "{% if values['attribute&#46;woo_publicatiedatum']|default %}{{ values['attribute&#46;woo_publicatiedatum'] }}{% endif %}",
    "Behandelstatus": "{% if values['case&#46;status']|default %}{% if values['case&#46;status'] == 'resolved' %}Afgehandeld{% elseif values['case&#46;status'] == 'open'  %}In behandeling{% elseif values['case&#46;status'] == 'closed'  %}Opgeschort{% elseif values['case&#46;status'] == 'new'  %}Nieuw{% endif %}{% endif %}",
    "Besluit": "",
    "Termijnoverschrijding": "{% if values['case&#46;date_target']|default and values['case&#46;date_of_completion']|default %}{% set dateTarget = date(values['case&#46;date_target']) %}{% set dateOfCompletion = date(values['case&#46;date_of_completion']) %}{% set interval = dateTarget.diff(dateOfCompletion) %}{{ interval.days }}{% endif %}",
    "URL_informatieverzoek": "",
    "URL_inventarisatielijst": "",
    "URL_besluit": "",
    "Geografisch_gebied": "",
    "BAG_ID": "",
    "BGT_ID": "",
    "Postcodegebied": "",
    "Adres": "",
    "COORDS": "",
    "Geografische_positie": "",
    "Bijlagen": "[{% set index=0 %}{% if values['attribute&#46;woo_publicatie']|default %}{% for document in values['attribute&#46;woo_publicatie'] %}{% if index != 0 %},{% endif %}{{ map('https://commongateway.nl/mapping/pdd.xxllncDocumentSetSourceId.schema.json', document)|json_encode }}{% set index=index+1 %}{% endfor %}{% endif %}]",
    "Themas.0.Hoofdthema": "{% if values['attribute&#46;woo_thema']|default %}{{ values['attribute&#46;woo_thema'] }}{% endif %}"
  },
  "cast": {
    "Themas.0.Hoofdthema": "unsetIfValue==",
    "Themas.0": "unsetIfValue==",
    "Bijlagen": "jsonToArray",
    "Object_ID": "integer"
  }
}
